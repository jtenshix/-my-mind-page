<!DOCTYPE html>
<html lang="es">
<head>
ย <meta charset="UTF-8" />
ย <meta name="viewport" content="width=device-width, initial-scale=1.0" />
ย <title>Notas Oceรกnicas</title>
ย ย <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
ย <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore-compat.js"></script>
ย ย <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@8.3.0/dist/gridstack.min.css" />
ย <script src="https://cdn.jsdelivr.net/npm/gridstack@8.3.0/dist/gridstack-all.js"></script>
ย ย <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />
ย <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
ย <style>
ย ย /* Estilos generales */
ย ย body {
ย ย ย font-family: sans-serif;
ย ย ย margin: 0;
ย ย ย min-height: 100vh;
ย ย ย background: linear-gradient(to bottom, #a2dff7 0%, #a2dff7 40%, #03254c 100%);
ย ย ย position: relative;
ย ย ย overflow: hidden;
ย ย ย padding-left: 20px;
ย ย ย padding-bottom: 100px; /* Espacio para รญconos inferiores */
ย ย }
ย ย /* Overlay de luz solar */
ย ย .sun-overlay {
ย ย ย position: fixed;
ย ย ย top: 0;
ย ย ย left: 0;
ย ย ย width: 100%;
ย ย ย height: 100%;
ย ย ย pointer-events: none;
ย ย ย background: radial-gradient(ellipse at top center, rgba(255,255,224,0.35) 0%, rgba(255,255,224,0) 50%);
ย ย ย z-index: 0;
ย ย }
ย ย /* Contenedor principal de notas */
ย ย #notaDisplay {
ย ย ย margin-top: 120px;
ย ย ย padding: 20px;
ย ย ย flex-grow: 1;
ย ย }
ย ย /* Cada nota se muestra como una "ventana" (carta de solitario) */
ย ย .grid-stack-item-content {
ย ย ย min-width: 280px;ย ย ย /* Ancho base de la carta */
ย ย ย min-height: 180px;ย ย ย/* Altura base de la carta */
ย ย ย padding: 10px;
ย ย ย background-color: #fff;
ย ย ย border: 2px solid #0077a3; /* Tono oceรกnico */
ย ย ย border-radius: 8px;
ย ย ย box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2); /* Sombra flotante */
ย ย ย display: flex;
ย ย ย flex-direction: column;
ย ย ย overflow: visible; /* Permitir que la nota se expanda para mostrar todo el contenido */
ย ย ย box-sizing: border-box;
ย ย }
ย ย /* Cuerpo de la nota */
ย ย .note-body {
ย ย ย padding: 10px;
ย ย ย flex-grow: 1;
ย ย ย font-size: 16px;
ย ย ย white-space: pre-wrap;
ย ย ย word-wrap: break-word;
ย ย ย line-height: 1.5;
ย ย }
ย ย /* Imรกgenes adaptadas al tamaรฑo de la nota */
ย ย .note-body img {
ย ย ย width: 100%;
ย ย ย height: auto;
ย ย ย object-fit: contain;
ย ย ย border-radius: 4px;
ย ย }
ย ย /* Barra de control inferior */
ย ย .note-footer {
ย ย ย background-color: rgba(0, 85, 119, 0.8); /* Azul profundo, semitransparente */
ย ย ย color: white;
ย ย ย height: 30px;
ย ย ย display: flex;
ย ย ย align-items: center;
ย ย ย justify-content: space-between;
ย ย ย padding: 0 5px;
ย ย }
ย ย .footer-left,
ย ย .footer-right {
ย ย ย display: flex;
ย ย ย align-items: center;
ย ย ย gap: 5px;
ย ย }
ย ย /* Iconos de la barra inferior */
ย ย .footer-icon {
ย ย ย background: none;
ย ย ย border: none;
ย ย ย color: white;
ย ย ย cursor: pointer;
ย ย ย font-size: 16px;
ย ย ย padding: 2px;
ย ย }
ย ย /* Estilo para la estrella draggable */
ย ย .drag-star {
ย ย ย font-size: 30px;
ย ย ย color: gold;
ย ย ย cursor: move;
ย ย ย text-shadow: 0 0 10px rgba(255,215,0,0.8);
ย ย }
ย ย /* Botรณn flotante para agregar notas */
ย ย #addNoteButton {
ย ย ย position: fixed;
ย ย ย bottom: 20px;
ย ย ย right: 20px;
ย ย ย background-color: #006994;
ย ย ย color: white;
ย ย ย border: none;
ย ย ย border-radius: 50%;
ย ย ย width: 60px;
ย ย ย height: 60px;
ย ย ย font-size: 30px;
ย ย ย display: flex;
ย ย ย justify-content: center;
ย ย ย align-items: center;
ย ย ย cursor: pointer;
ย ย ย box-shadow: 0 3px 8px rgba(0,0,0,0.3);
ย ย ย transition: background-color 0.3s ease, transform 0.3s ease;
ย ย ย z-index: 2;
ย ย }
ย ย #addNoteButton:hover {
ย ย ย background-color: #005577;
ย ย ย transform: scale(1.05);
ย ย }
ย ย /* Opciones y รกrea de entrada para nuevas notas */
ย ย #addNoteOptions {
ย ย ย position: fixed;
ย ย ย bottom: 90px;
ย ย ย right: 20px;
ย ย ย display: none;
ย ย ย flex-direction: column;
ย ย ย gap: 10px;
ย ย ย background-color: rgba(255,255,255,0.95);
ย ย ย border-radius: 5px;
ย ย ย padding: 10px;
ย ย ย box-shadow: 0 3px 8px rgba(0,0,0,0.3);
ย ย ย z-index: 2;
ย ย }
ย ย #addNoteOptions button {
ย ย ย padding: 8px 15px;
ย ย ย border: 1px solid #ccc;
ย ย ย border-radius: 3px;
ย ย ย cursor: pointer;
ย ย ย background-color: #f9f9f9;
ย ย }
ย ย #inputArea {
ย ย ย position: fixed;
ย ย ย bottom: 90px;
ย ย ย left: 50%;
ย ย ย transform: translateX(-50%);
ย ย ย background-color: rgba(255,255,255,0.95);
ย ย ย padding: 20px;
ย ย ย border-radius: 8px;
ย ย ย box-shadow: 0 3px 8px rgba(0,0,0,0.3);
ย ย ย display: none;
ย ย ย flex-direction: column;
ย ย ย gap: 10px;
ย ย ย width: 80%;
ย ย ย max-width: 500px;
ย ย ย z-index: 2;
ย ย }
ย ย #inputArea textarea,
ย ย #inputArea input[type="text"] {
ย ย ย padding: 10px;
ย ย ย border: 1px solid #ccc;
ย ย ย border-radius: 4px;
ย ย ย resize: none;
ย ย ย width: 100%;
ย ย ย box-sizing: border-box;
ย ย ย white-space: pre-wrap;
ย ย ย word-wrap: break-word;
ย ย ย line-height: 1.5;
ย ย }
ย ย #inputArea button {
ย ย ย padding: 10px 15px;
ย ย ย background-color: #006994;
ย ย ย color: white;
ย ย ย border: none;
ย ย ย border-radius: 4px;
ย ย ย cursor: pointer;
ย ย }
ย ย #imageLinkInputArea, #textNoteInputArea {
ย ย ย display: none;
ย ย ย flex-direction: column;
ย ย ย gap: 10px;
ย ย }
ย ย .input-group {
ย ย ย display: flex;
ย ย ย flex-direction: column;
ย ย ย gap: 5px;
ย ย }
ย ย /* รconos minimalistas en blanco en la esquina inferior izquierda */
ย ย #sidebar {
ย ย ย position: fixed;
ย ย ย bottom: 20px;
ย ย ย left: 20px;
ย ย ย display: flex;
ย ย ย flex-direction: column;
ย ย ย gap: 15px;
ย ย ย z-index: 3;
ย ย }
ย ย .sidebar-icon {
ย ย ย width: 60px;
ย ย ย height: 60px;
ย ย ย background: none;
ย ย ย color: white;
ย ย ย font-size: 30px;
ย ย ย display: flex;
ย ย ย align-items: center;
ย ย ย justify-content: center;
ย ย ย cursor: pointer;
ย ย ย transition: transform 0.3s ease;
ย ย }
ย ย .sidebar-icon:hover {
ย ย ย transform: scale(1.1);
ย ย }
ย ย /* Calendario flotante */
ย ย #floatingCalendar {
ย ย ย position: fixed;
ย ย ย top: 50%;
ย ย ย left: 100px;
ย ย ย transform: translateY(-50%);
ย ย ย width: 350px;
ย ย ย height: 400px;
ย ย ย background: #fff;
ย ย ย border: 2px solid #ccc;
ย ย ย border-radius: 8px;
ย ย ย display: none;
ย ย ย z-index: 4;
ย ย ย box-shadow: 0 3px 8px rgba(0,0,0,0.3);
ย ย ย padding: 10px;
ย ย }
ย ย /* Contenedor para FullCalendar */
ย ย #calendarContainer {
ย ย ย width: 100%;
ย ย ย height: 100%;
ย ย }
ย </style>
</head>
<body>
ย ย <div class="sun-overlay"></div>
ยย
ย ย <div id="sidebar">
ย ย <div class="sidebar-icon" title="Mรบsica">โช</div>
ย ย <div class="sidebar-icon" title="Archivos">๐</div>
ย ย <div class="sidebar-icon" title="Calendario" id="calendarIcon">๐</div>
ย ย <div class="sidebar-icon" title="Tareas">โ</div>
ย ย <div class="sidebar-icon" title="Contactos">โ</div>
ย </div>
ยย
ย ย <div id="floatingCalendar">
ย ย <div id="calendarContainer"></div>
ย </div>
ยย
ย ย <div id="notaDisplay" class="grid-stack"></div>
ย <button id="addNoteButton">+</button>
ย <div id="addNoteOptions">
ย ย <button id="addImageLinkOption">Guardar link de imagen</button>
ย ย <button id="addTextNoteOption">Subir nota</button>
ย </div>
ย <div id="inputArea">
ย ย <div id="imageLinkInputArea">
ย ย ย <div class="input-group">
ย ย ย ย <label for="imageLink">Link de la imagen:</label>
ย ย ย ย <input type="text" id="imageLink" placeholder="Ej: https://..." />
ย ย ย </div>
ย ย ย <div class="input-group">
ย ย ย ย <label for="imageNoteText">Texto de la imagen (opcional):</label>
ย ย ย ย <textarea id="imageNoteText" placeholder="Descripciรณn o nota..."></textarea>
ย ย ย </div>
ย ย ย <button id="saveImageLink">Guardar Link</button>
ย ย </div>
ย ย <div id="textNoteInputArea">
ย ย ย <textarea id="textNote" placeholder="Escribe tu nota aquรญ..."></textarea>
ย ย ย <button id="saveTextNote">Guardar Nota</button>
ย ย </div>
ย </div>
ยย
ย <script>
ย ย // Configuraciรณn de Firebase (reemplaza con tus datos)
ย ย const firebaseConfig = {
ย ย ย apiKey: "AIzaSyCHa373WgLLHsy8wZXK9zr_HVieQvlrhUs",
ย ย ย authDomain: "oasis-b036d.firebaseapp.com",
ย ย ย projectId: "oasis-b036d",
ย ย ย storageBucket: "oasis-b036d.firebasestorage.app",
ย ย ย messagingSenderId: "141546637821",
ย ย ย appId: "1:141546637821:web:0a861aeb13831774ed3194",
ย ย ย measurementId: "G-HB2P17H5YL"
ย ย };
ย ย firebase.initializeApp(firebaseConfig);
ย ย const db = firebase.firestore();
ย ยย
ย ย // Inicializar GridStack
ย ย const grid = GridStack.init({
ย ย ย margin: 5,
ย ย ย disableResize: true,
ย ย ย float: true
ย ย });
ย ยย
ย ย // Autoajuste en textareas
ย ย function autoResizeTextarea(el) {
ย ย ย el.style.height = 'auto';
ย ย ย el.style.height = el.scrollHeight + 'px';
ย ย }
ย ย const textNoteInput = document.getElementById('textNote');
ย ย const imageNoteText = document.getElementById('imageNoteText');
ย ย textNoteInput.addEventListener('input', () => autoResizeTextarea(textNoteInput));
ย ย imageNoteText.addEventListener('input', () => autoResizeTextarea(imageNoteText));
ย ยย
ย ย // Funciรณn para crear y mostrar cada nota en pantalla
ย ย function mostrarNotaEnPantalla(doc) {
ย ย ย const notaData = doc.data();
ย ย ยย
ย ย ย // Crear widget (nota) y su contenedor
ย ย ย const gridItem = document.createElement('div');
ย ย ย gridItem.classList.add('grid-stack-item');
ย ย ย gridItem.setAttribute('data-note-id', doc.id);
ย ย ยย
ย ย ย // Contenedor de la nota (tipo carta)
ย ย ย const content = document.createElement('div');
ย ย ย content.classList.add('grid-stack-item-content');
ย ย ยย
ย ย ย // Cuerpo de la nota
ย ย ย const noteBody = document.createElement('div');
ย ย ย noteBody.classList.add('note-body');
ย ย ยย
ย ย ย if(notaData.url) {
ย ย ย ย const img = document.createElement('img');
ย ย ย ย img.src = notaData.url;
ย ย ย ย noteBody.appendChild(img);
ย ย ย ย if(notaData.texto) {
ย ย ย ย ย const p = document.createElement('p');
ย ย ย ย ย p.textContent = notaData.texto;
ย ย ย ย ย noteBody.appendChild(p);
ย ย ย ย }
ย ย ย } else if(notaData.nota) {
ย ย ย ย const p = document.createElement('p');
ย ย ย ย p.textContent = notaData.nota;
ย ย ย ย noteBody.appendChild(p);
ย ย ย }
ย ย ยย
ย ย ย content.appendChild(noteBody);
ย ย ยย
ย ย ย // Footer con controles (editar, eliminar, draggable)
ย ย ย const noteFooter = document.createElement('div');
ย ย ย noteFooter.classList.add('note-footer');
ย ย ย const footerLeft = document.createElement('div');
ย ย ย footerLeft.classList.add('footer-left');
ย ย ย const dragStar = document.createElement('div');
ย ย ย dragStar.classList.add('drag-star');
ย ย ย dragStar.textContent = 'โฆ';
ย ย ย dragStar.draggable = true;
ย ย ย dragStar.addEventListener('dragstart', (e) => {
ย ย ย ย document.getElementById('floatingCalendar').style.display = 'block';
ย ย ย ย e.dataTransfer.setData("text/plain", doc.id);
ย ย ย });
ย ย ย dragStar.addEventListener('dragend', () => {
ย ย ย ย setTimeout(() => {
ย ย ย ย ย document.getElementById('floatingCalendar').style.display = 'none';
ย ย ย ย }, 100);
ย ย ย });
ย ย ย footerLeft.appendChild(dragStar);
ย ย ยย
ย ย ย const footerRight = document.createElement('div');
ย ย ย footerRight.classList.add('footer-right');
ย ย ย const editButton = document.createElement('button');
ย ย ย editButton.classList.add('footer-icon');
ย ย ย editButton.innerHTML = 'โ';
ย ย ย editButton.onclick = function() {
ย ย ย ย const editInput = document.createElement('input');
ย ย ย ย editInput.type = 'text';
ย ย ย ย editInput.value = notaData.texto || notaData.nota || '';
ย ย ย ย const pElement = noteBody.querySelector('p');
ย ย ย ย if(pElement) {
ย ย ย ย ย noteBody.replaceChild(editInput, pElement);
ย ย ย ย }
ย ย ย ย const saveEditButton = document.createElement('button');
ย ย ย ย saveEditButton.classList.add('footer-icon');
ย ย ย ย saveEditButton.innerHTML = '๐พ';
ย ย ย ย saveEditButton.onclick = function() {
ย ย ย ย ย const newText = editInput.value;
ย ย ย ย ย if(newText.trim() !== '') {
ย ย ย ย ย ย db.collection('notas').doc(doc.id).update(notaData.url ? { texto: newText } : { nota: newText })
ย ย ย ย ย ย ย .then(() => {
ย ย ย ย ย ย ย ย const newP = document.createElement('p');
ย ย ย ย ย ย ย ย newP.textContent = newText;
ย ย ย ย ย ย ย ย noteBody.replaceChild(newP, editInput);
ย ย ย ย ย ย ย ย footerRight.replaceChild(editButton, saveEditButton);
ย ย ย ย ย ย ย })
ย ย ย ย ย ย ย .catch((error) => {
ย ย ย ย ย ย ย ย console.error('Error al actualizar la nota: ', error);
ย ย ย ย ย ย ย });
ย ย ย ย ย }
ย ย ย ย };
ย ย ย ย footerRight.replaceChild(saveEditButton, editButton);
ย ย ย };
ย ย ย footerRight.appendChild(editButton);
ย ย ยย
ย ย ย const deleteButton = document.createElement('button');
ย ย ย deleteButton.classList.add('footer-icon');
ย ย ย deleteButton.innerHTML = 'โ';
ย ย ย deleteButton.onclick = function() {
ย ย ย ย db.collection('notas').doc(doc.id).delete()
ย ย ย ย ย .then(() => {
ย ย ย ย ย ย grid.removeWidget(gridItem);
ย ย ย ย ย })
ย ย ย ย ย .catch((error) => {
ย ย ย ย ย ย console.error("Error al eliminar la nota: ", error);
ย ย ย ย ย });
ย ย ย };
ย ย ย footerRight.appendChild(deleteButton);
ย ย ยย
ย ย ย noteFooter.appendChild(footerLeft);
ย ย ย noteFooter.appendChild(footerRight);
ย ย ย content.appendChild(noteFooter);
ย ย ย gridItem.appendChild(content);
ย ย ยย
ย ย ย // Configurar posiciรณn y dimensiones (persistentes o por defecto)
ย ย ย const pos = {
ย ย ย ย x: notaData.x || 0,
ย ย ย ย y: typeof notaData.y === 'number' ? notaData.y : 0,
ย ย ย ย w: notaData.w || 2,
ย ย ย ย h: notaData.h || 2,
ย ย ย ย autoPosition: (notaData.x === undefined || notaData.y === undefined)
ย ย ย };
ย ย ย grid.addWidget(gridItem, pos);
ย ย }
ย ยย
ย ย // Funciรณn para limpiar todas las notas
ย ย function limpiarNotasDisplay() {
ย ย ย grid.removeAll();
ย ย }
ย ยย
ย ย // Escuchar cambios en la colecciรณn "notas"
ย ย db.collection('notas')
ย ย ย .orderBy('__name__')
ย ย ย .onSnapshot((snapshot) => {
ย ย ย ย limpiarNotasDisplay();
ย ย ย ย snapshot.forEach((doc) => {
ย ย ย ย ย mostrarNotaEnPantalla(doc);
ย ย ย ย });
ย ย ย });
ย ยย
ย ย // Manejo de la interfaz para agregar notas
ย ย const addNoteButton = document.getElementById('addNoteButton');
ย ย const addNoteOptions = document.getElementById('addNoteOptions');
ย ย const addImageLinkOption = document.getElementById('addImageLinkOption');
ย ย const addTextNoteOption = document.getElementById('addTextNoteOption');
ย ย const inputArea = document.getElementById('inputArea');
ย ย const imageLinkInputArea = document.getElementById('imageLinkInputArea');
ย ย const imageLinkInput = document.getElementById('imageLink');
ย ย const saveImageLinkButton = document.getElementById('saveImageLink');
ย ย const textNoteInputArea = document.getElementById('textNoteInputArea');
ย ย const saveTextNoteButton = document.getElementById('saveTextNote');
ย ย let addingNewNote = false;
ย ยย
ย ย addNoteButton.onclick = function() {
ย ย ย addingNewNote = !addingNewNote;
ย ย ย addNoteOptions.style.display = addingNewNote ? 'flex' : 'none';
ย ย ย inputArea.style.display = 'none';
ย ย ย imageLinkInputArea.style.display = 'none';
ย ย ย textNoteInputArea.style.display = 'none';
ย ย };
ย ย addImageLinkOption.onclick = function() {
ย ย ย addNoteOptions.style.display = 'none';
ย ย ย inputArea.style.display = 'flex';
ย ย ย imageLinkInputArea.style.display = 'flex';
ย ย ย textNoteInputArea.style.display = 'none';
ย ย ย addingNewNote = false;
ย ย };
ย ย addTextNoteOption.onclick = function() {
ย ย ย addNoteOptions.style.display = 'none';
ย ย ย inputArea.style.display = 'flex';
ย ย ย imageLinkInputArea.style.display = 'none';
ย ย ย textNoteInputArea.style.display = 'flex';
ย ย ย addingNewNote = false;
ย ย };
ย ยย
ย ย // Funciรณn para guardar nota con link de imagen
ย ย function guardarLinkDeImagen() {
ย ย ย const link = imageLinkInput.value;
ย ย ย const texto = imageNoteText.value;
ย ย ย if(link.trim() !== '') {
ย ย ย ย db.collection('notas').add({
ย ย ย ย ย url: link,
ย ย ย ย ย texto: texto.trim() !== '' ? texto : null
ย ย ย ย })
ย ย ย ย .then(() => {
ย ย ย ย ย imageLinkInput.value = '';
ย ย ย ย ย imageNoteText.value = '';
ย ย ย ย ย inputArea.style.display = 'none';
ย ย ย ย })
ย ย ย ย .catch((error) => {
ย ย ย ย ย console.error('Error al guardar el link de imagen: ', error);
ย ย ย ย });
ย ย ย }
ย ย }
ย ยย
ย ย // Funciรณn para guardar nota de texto
ย ย function guardarNotaTexto() {
ย ย ย const nota = textNoteInput.value;
ย ย ย if(nota.trim() !== '') {
ย ย ย ย db.collection('notas').add({
ย ย ย ย ย nota: nota
ย ย ย ย })
ย ย ย ย .then(() => {
ย ย ย ย ย textNoteInput.value = '';
ย ย ย ย ย inputArea.style.display = 'none';
ย ย ย ย })
ย ย ย ย .catch((error) => {
ย ย ย ย ย console.error('Error al guardar la nota de texto: ', error);
ย ย ย ย });
ย ย ย }
ย ย }
ย ยย
ย ย saveImageLinkButton.onclick = guardarLinkDeImagen;
ย ย saveTextNoteButton.onclick = guardarNotaTexto;
ย ยย
ย ย // Actualizar posiciรณn de la nota al finalizar arrastre
ย ย grid.on('dragstop', function(event, el) {
ย ย ย setTimeout(() => {
ย ย ย ย const noteId = el.getAttribute('data-note-id');
ย ย ย ย const node = el.gridstackNode;
ย ย ย ย if(noteId && node) {
ย ย ย ย ย db.collection('notas').doc(noteId).update({
ย ย ย ย ย ย x: node.x,
ย ย ย ย ย ย y: node.y,
ย ย ย ย ย ย w: node.w,
ย ย ย ย ย ย h: node.h
ย ย ย ย ย }).catch(error => console.error("Error guardando posiciรณn:", error));
ย ย ย ย }
ย ย ย }, 100);
ย ย });
ย ยย
ย ย // Inicializaciรณn de FullCalendar (sin cambios en esta parte)
ย ย document.addEventListener('DOMContentLoaded', function() {
ย ย ย var calendarEl = document.getElementById('calendarContainer');
ย ย ย var calendar = new FullCalendar.Calendar(calendarEl, {
ย ย ย ย initialView: 'dayGridMonth',
ย ย ย ย initialDate: '2025-04-10',
ย ย ย ย headerToolbar: {
ย ย ย ย ย left: 'prev,next today',
ย ย ย ย ย center: 'title',
ย ย ย ย ย right: 'dayGridMonth,timeGridWeek,timeGridDay'
ย ย ย ย },
ย ย ย ย selectable: true,
ย ย ย ย navLinks: true,
ย ย ย ย businessHours: true,
ย ย ย ย dayMaxEvents: true,
ย ย ย ย dateClick: function(info) {
ย ย ย ย ย // Ejemplo: asignar fecha a la nota (completar segรบn lรณgica deseada)
ย ย ย ย ย console.log("Fecha seleccionada: " + info.dateStr);
ย ย ย ย }
ย ย ย });
ย ย ย calendar.render();
ย ย });
ย </script>
</body>
</html>
