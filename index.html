<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Notas e Im√°genes</title>
    <style>
        .note-item {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            position: relative;
        }
        .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: red;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Agregar Nota o Imagen</h1>
    <form id="noteForm">
        <label for="nota">Nota:</label>
        <input type="text" id="nota" name="nota"><br>
        <label for="imagen">URL de Imagen:</label>
        <input type="url" id="imagen" name="imagen"><br>
        <button type="submit">Guardar</button>
    </form>

    <h2>Notas Guardadas</h2>
    <div id="notasGuardadas"></div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz9KpuuG2fWnb15sThyEPLU3jLkU_uTFnhvQnhhU_RDagfgt4IPrX2VVWWg0UzZc637Dg/exec';

        document.addEventListener('DOMContentLoaded', cargarNotas);

        document.getElementById('noteForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const nota = document.getElementById('nota').value;
            const imagen = document.getElementById('imagen').value;

            fetch(SCRIPT_URL, {
                method: 'POST',
                body: new URLSearchParams({ 'nota': nota, 'imagen': imagen })
            })
            .then(response => response.text())
            .then(data => {
                console.log('Success:', data);
                cargarNotas();
            })
            .catch(error => console.error('Error:', error));
        });

        function cargarNotas() {
            fetch(SCRIPT_URL)
                .then(response => response.json())
                .then(data => {
                    const notasGuardadas = document.getElementById('notasGuardadas');
                    notasGuardadas.innerHTML = '';
                    data.forEach((item, index) => {
                        const noteItem = document.createElement('div');
                        noteItem.className = 'note-item';
                        noteItem.innerHTML = 
                            <button class="delete-btn" onclick="eliminarNota(${item.row})">X</button>
                            <strong>Nota:</strong> ${item.nota}<br>
                            <strong>Imagen:</strong> <a href="${item.imagen}" target="_blank">Ver Imagen</a>
                        ;
                        notasGuardadas.appendChild(noteItem);
                    });
                })
                .catch(error => console.error('Error:', error));
        }

        function eliminarNota(row) {
            fetch(SCRIPT_URL, {
                method: 'POST',
                body: new URLSearchParams({ 'delete': true, 'row': row })
            })
            .then(response => response.text())
            .then(data => {
                console.log('Eliminado:', data);
                cargarNotas();
            })
            .catch(error => console.error('Error al eliminar:', error));
        }
    </script>
</body>
</html>  


